$schema: 'https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json'
name: Neurobehavioral Presentation Command Language
patterns:
  - include: '#expression'
repository:
  expression:
    patterns:
      - include: '#type'
      - include: '#constant'
      - include: '#operator'
      - include: '#control'
      - include: '#subroutine'
  type:
    patterns:
      - match: \bstring\b
        name: storage.type.string
      - match: \bint\b
        name: storage.type.int
      - match: \bdouble\b
        name: storage.type.double
      - match: \brgb_color\b
        name: storage.type.color
      - match: \barray\b
        name: storage.type.array
  constant:
    patterns:
      - match: '([-+]?[0-9]+|[-+]?[0-9]*\.?[0-9]+.)'
        name: constant.numeric
      - match: '".*(?<!\)"'
        name: constant.character
  operator:
    patterns:
      - match: '&&|\|\||\!|'
        name: keyword.operator.logic
      - match: +|-|*|/|%
        name: keyword.operator.arithmetic
      - match: ==|\!=|<|>|<=|>=|
        name: keyword.operator.comparison
  control:
    patterns:
      - match: \b(loop|until)\b
        name: keyword.control.loop
      - match: \b(if|elseif|else|then)\b
        name: keyword.control.condition
      - match: \b(begin|end)\b
        name: keyword.control.block
scopeName: source.nb_pcl
