$schema: 'https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json'
name: Neurobehavioral Presentation Scenario
patterns:
  - include: '#header'
  - include: '#sdl_section'
  - include: '#pcl_section'
repository:
  header:
    begin: \A
    end: '^[ \t]*(?=(begin);)'
    patterns:
      - include: '#numeric'
      - include: '#string'
      - include: '#comment'
    name: meta.sce-header
  comment:
    patterns:
      - match: '#.*$'
        name: comment.line
      - begin: /\*
        end: \*/
        name: comment.block
  constant:
    patterns:
      - match: '([-+]?[0-9]+|[-+]?[0-9]*\.?[0-9]+.)'
        name: constant.numeric
      - match: '".*(?<!\)"'
        name: constant.character
  sdl_section:
    begin: '^[ \t](begin)[ \t];[ \t]$'
    end: '(^[ \t]*(?=(begin_pcl);))|\Z'
    beginCaptures:
      '1':
        name: keyword.other
    patterns:
      - include: '#sdl_definitions'
    name: meta.sdl-section
  sdl_definitions:
    patterns:
      - begin: '^[ \t]*([\w_]+)[ \t]*\{'
        end: '\}[ \t]*([\w_]+)?[ \t];'
        beginCaptures:
          '1':
            name: entity.name.tag
        endCaptures:
          '1':
            name: variable.parameter
        patterns:
          - include: '#sdl_definitions'
      - include: '#comment'
  pcl_section:
    begin: '^[ \t](begin_pcl)[ \t];[ \t]$'
    end: \Z
    beginCaptures:
      '1':
        name: keyword.other
    patterns:
      - include: source.nb_pcl
scopeName: source.nb_sce
